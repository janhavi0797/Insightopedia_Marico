<div class="table-wrapper mat-elevation-z8">
  
    <div class="allfiles-container-header">
        <div class="allfiles-container-header-tabs">
          <button [ngClass]="isAllFiles ? 'active' : ''" id="allfilebtn" (click)="changeFileOption(1)">All Files
            <span>{{!isAllFiles ? 0 : this.count}}
              files</span></button>
          <button [ngClass]="!isAllFiles ? 'active' : ''" id="myfilebtn" (click)="changeFileOption(0)">My Files <span>{{isAllFiles ? 0 : this.count}}
              files</span></button>
        </div>
        <div class="allfiles-container-header-search">
          <form class="example-form">
            <mat-form-field class="example-full-width">
              <mat-label>Search by User Name</mat-label>
              <input type="text" placeholder="Search User Name" aria-label="UserName" matInput [formControl]="myUserControl"
                [matAutocomplete]="autoUser" (keyup)="emptyUser()">
              <mat-autocomplete #autoUser="matAutocomplete" (optionSelected)="onOptionSelectedUser($event)">
                <mat-option *ngFor="let option of filteredOptionsUser | async;"
                  [value]="option?.userName">{{option?.userName}}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </form>
          <form class="example-form">
            <mat-form-field class="example-full-width">
              <mat-label>Search by Project Name</mat-label>
              <input type="text" placeholder="Search Project Name" aria-label="projectName" matInput [formControl]="myControl"
                [matAutocomplete]="auto" (keyup)="emptyProject()">
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onOptionSelectedProject($event)">
                <mat-option *ngFor="let option of filteredOptionsProject | async;"
                  [value]="option?.projectName">{{option?.projectName}}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </form>
        </div>
      </div>   

    <!-- Table and Scroll Container -->
    <div class="mat-table-container">
      <table mat-table [dataSource]="dataSource" class="mat-table">
    
        <!-- User Name Column -->
        <ng-container matColumnDef="userName">
          <th mat-header-cell *matHeaderCellDef> User Name </th>
          <td mat-cell *matCellDef="let element"> {{element.userName}} </td>
        </ng-container>
  
        <!-- Project Name Column -->
        <ng-container matColumnDef="projectName">
          <th mat-header-cell *matHeaderCellDef> Project Name </th>
          <td mat-cell *matCellDef="let element"> {{element.projectName}} </td>
        </ng-container>
  
        <!-- Created Time Column -->
        <ng-container matColumnDef="createdTime">
          <th mat-header-cell *matHeaderCellDef> Created Time </th>
          <td mat-cell *matCellDef="let element"> {{element.createdTime}} </td>
        </ng-container>
  
        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let element"> 

            <label class="view-btn" [ngClass]="{
              'status-processing': element.status === 0,
              'status-completed': element.status === 1,
              'status-failed': element.status > 1
            }">{{ element.status === 0 ? 'Processing' : (element.status === 1 ? 'Completed' : 'Failed') }}</label>
    
          </td>
        </ng-container>

        <!-- View Button -->
        <ng-container matColumnDef="view">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let element"> 
                <button [disabled]="element.status !== 1" class="view-btn" (click)="viewDetails(element.projectId, element.userId)">View</button>
            </td>
          </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="header"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  
   <!-- Paginator outside the scrollable table -->
   <div class="mat-paginator-wrapper">
    <mat-paginator [pageSizeOptions]="[10, 30, 50]" showFirstLastButtons aria-label="Select page of periodic elements">
    </mat-paginator>
  </div>
  
  </div>
  
  <div *ngIf="isLoading" class="spinner">
    <mat-spinner></mat-spinner>
  </div>
  
  
  
  
    